<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Modularity · EcologicalNetworks</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="EcologicalNetworks logo"/></a><div class="docs-package-name"><span class="docs-autofit">EcologicalNetworks</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Index</a></li><li><span class="tocitem">Interface</span><ul><li><a class="tocitem" href="../../interface/types/">Types</a></li><li><a class="tocitem" href="../../interface/conversions/">Conversions</a></li><li><a class="tocitem" href="../../interface/highlevel/">Core functions</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>Modularity</a><ul class="internal"><li><a class="tocitem" href="#Generating-modular-partitions-1"><span>Generating modular partitions</span></a></li><li><a class="tocitem" href="#Measuring-modularity-1"><span>Measuring modularity</span></a></li><li><a class="tocitem" href="#Species-functional-roles-1"><span>Species functional roles</span></a></li></ul></li><li><a class="tocitem" href="../integration_mangal/">Integration with Mangal</a></li><li><a class="tocitem" href="../beta-diversity/">Network beta-diversity</a></li><li><a class="tocitem" href="../extinctions/">Extinctions</a></li></ul></li><li><span class="tocitem">Basic measures</span><ul><li><a class="tocitem" href="../../properties/links/">Links</a></li><li><a class="tocitem" href="../../properties/modularity/">Modularity</a></li><li><a class="tocitem" href="../../properties/nestedness/">Nestedness</a></li><li><a class="tocitem" href="../../properties/motifs/">Motifs</a></li><li><a class="tocitem" href="../../properties/paths/">Centrality and paths</a></li><li><a class="tocitem" href="../../properties/overlap/">Overlap and similarity</a></li></ul></li><li><span class="tocitem">Advanced information</span><ul><li><a class="tocitem" href="../../properties/betadiversity/">Beta-diversity</a></li><li><a class="tocitem" href="../../properties/resilience/">Resilience</a></li><li><a class="tocitem" href="../../properties/information/">Information theory</a></li></ul></li><li><span class="tocitem">Generating networks</span><ul><li><a class="tocitem" href="../../random/null/">Null models</a></li><li><a class="tocitem" href="../../random/structure/">Structural models</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Modularity</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Modularity</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/EcoJulia/EcologicalNetworks.jl/blob/master/docs/src/examples/modularity.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><p>In this example, we will show how the modular structure of an ecological network can be optimized. Finding the optimal modular structure can be a time-consuming process, as it relies on heuristic which are not guaranteed to converge to the global maximum. There is no elegant alternative to trying multiple approaches, repeating the process multiple times, and having some luck.</p><pre><code class="language-julia">using EcologicalNetworks
using EcologicalNetworksPlots
using Plots</code></pre><h2 id="Generating-modular-partitions-1"><a class="docs-heading-anchor" href="#Generating-modular-partitions-1">Generating modular partitions</a><a class="docs-heading-anchor-permalink" href="#Generating-modular-partitions-1" title="Permalink"></a></h2><p>For the first approach, we will generate random partitions of the species across 3 to 12 modules, and evaluate 20 replicate attempts for each of these combinations. The output we are interested in is the number of modules, and the overall modularity.</p><pre><code class="language-julia">all_hp_data = filter(x -&gt; occursin(&quot;Hadfield&quot;, x.Reference), web_of_life());
ids = getfield.(all_hp_data, :ID);
networks = convert.(BinaryNetwork, web_of_life.(ids));
N = networks[1]

n = repeat(3:12, outer=20)
m = Array{Dict}(undef, length(n))

for i in eachindex(n)
  # Each run returns the network and its modules
  # We discard the network, and assign the modules to our object
  _, m[i] = n_random_modules(n[i])(N) |&gt; x -&gt; brim(x...)
end</code></pre><pre><code class="language-">p1 = scatter(c, q, c=:grey, msw=0.0, leg=false, frame=:origin, grid=false, margin = 10mm)
xaxis!(p1, &quot;Number of modules&quot;)
yaxis!(p1, &quot;Modularity&quot;, (0, 0.5))</code></pre><h2 id="Measuring-modularity-1"><a class="docs-heading-anchor" href="#Measuring-modularity-1">Measuring modularity</a><a class="docs-heading-anchor-permalink" href="#Measuring-modularity-1" title="Permalink"></a></h2><p>Now that we have the modular partition for every attempt, we can count the modules in it, and measure its modularity:</p><pre><code class="language-julia">q = map(x -&gt; Q(N,x), m);
c = (m .|&gt; values |&gt; collect) .|&gt; unique .|&gt; length;</code></pre><pre><code class="language-none">200-element Array{Int64,1}:
 3
 4
 4
 6
 4
 3
 5
 4
 6
 5
 ⋮
 4
 4
 4
 5
 4
 5
 6
 6
 5</code></pre><p>Out of all attempts, we want to get the most modular one, <em>i.e.</em> the one with highest modularity. In some simple problems, there may be several partitions with the highest value, so we can either take the first, or one at random:</p><pre><code class="language-julia">optimal = rand(findall(q.== maximum(q)));
best_m = m[optimal];</code></pre><pre><code class="language-none">Dict{String,Int64} with 28 entries:
  &quot;Ctenophthalmus inornatus&quot; =&gt; 3
  &quot;Chionomys nivalis&quot;        =&gt; 3
  &quot;Hystrichopsylla satunini&quot; =&gt; 5
  &quot;Ceratophyllus sciurorum&quot;  =&gt; 2
  &quot;Apodemus sylvaticus&quot;      =&gt; 2
  &quot;Ctenophthalmus shovi&quot;     =&gt; 5
  &quot;Amalaraeus penicilliger&quot;  =&gt; 4
  &quot;Megabothris turbidus&quot;     =&gt; 3
  &quot;Myoxopsylla jordani&quot;      =&gt; 1
  &quot;Amphipsylla georgica&quot;     =&gt; 3
  &quot;Sorex araneus&quot;            =&gt; 5
  &quot;Rhadinopsylla integella&quot;  =&gt; 3
  &quot;Apodemus mystacinus&quot;      =&gt; 5
  &quot;Microtus majori&quot;          =&gt; 5
  &quot;Ctenophthalmus proximus&quot;  =&gt; 5
  &quot;Myoxus glis&quot;              =&gt; 1
  &quot;Nosopsyllus fasciatus&quot;    =&gt; 2
  &quot;Leptopsylla segnis&quot;       =&gt; 5
  &quot;Palaeopsylla caucasica&quot;   =&gt; 2
  ⋮                          =&gt; ⋮</code></pre><p>This can be plotted using <code>EcologicalNetworksPlots</code>:</p><pre><code class="language-julia">I = initial(RandomInitialLayout, N)
for step in 1:4000
  position!(SpringElectric(1.2; gravity=0.1), I, N)
end
p2 = plot(I, N, aspectratio=1)
scatter!(p2, I, N, bipartite=true, nodefill=best_m, markercolor=:isolum)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip590">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip590)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip591">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip590)" d="
M86.9921 1521.01 L2352.76 1521.01 L2352.76 47.2441 L86.9921 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip592">
    <rect x="86" y="47" width="2267" height="1475"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1407.34,1256.57 1590.35,744.29 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1590.35,744.29 1824.07,777.892 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1590.35,744.29 1816.57,237.556 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1464.43,493.59 1590.35,744.29 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1277.58,1090.22 1590.35,744.29 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1590.35,744.29 1775.65,512.862 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1408.17,876.278 1590.35,744.29 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1392.15,299.046 1590.35,744.29 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1174.36,587.061 1407.34,1256.57 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1174.36,587.061 1824.07,777.892 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1174.36,587.061 1816.57,237.556 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1174.36,587.061 1464.43,493.59 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1174.36,587.061 1277.58,1090.22 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1174.36,587.061 1775.65,512.862 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  663.635,588.115 1174.36,587.061 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  811.639,805.057 1174.36,587.061 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1104.84,1273.42 1174.36,587.061 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  890.514,508.826 1174.36,587.061 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1174.36,587.061 1408.17,876.278 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1174.36,587.061 1302.08,88.9544 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1166.31,896.255 1174.36,587.061 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1174.36,587.061 1617.2,344.972 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1045.28,187.376 1174.36,587.061 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1016.88,329.986 1174.36,587.061 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1824.07,777.892 2009.84,328.474 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1816.57,237.556 2009.84,328.474 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1464.43,493.59 2009.84,328.474 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1775.65,512.862 2009.84,328.474 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  970.151,1020.04 1407.34,1256.57 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  970.151,1020.04 1824.07,777.892 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  970.151,1020.04 1464.43,493.59 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  970.151,1020.04 1277.58,1090.22 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  663.635,588.115 970.151,1020.04 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  811.639,805.057 970.151,1020.04 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  970.151,1020.04 1104.84,1273.42 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  970.151,1020.04 1166.31,896.255 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  695.202,1166.81 970.151,1020.04 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1407.34,1256.57 1595.03,1066.22 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1595.03,1066.22 1824.07,777.892 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1464.43,493.59 1595.03,1066.22 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1277.58,1090.22 1595.03,1066.22 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1595.03,1066.22 1775.65,512.862 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1104.84,1273.42 1595.03,1066.22 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1408.17,876.278 1595.03,1066.22 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1166.31,896.255 1595.03,1066.22 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  831.619,331.765 1464.43,493.59 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  663.635,588.115 831.619,331.765 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1616.89,131.783 1824.07,777.892 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1616.89,131.783 1816.57,237.556 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1464.43,493.59 1616.89,131.783 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1616.89,131.783 1775.65,512.862 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1302.08,88.9544 1616.89,131.783 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1250.77,1479.3 1407.34,1256.57 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1250.77,1479.3 1277.58,1090.22 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1104.84,1273.42 1250.77,1479.3 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1824.07,777.892 2005.73,533.153 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1816.57,237.556 2005.73,533.153 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1464.43,493.59 2005.73,533.153 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1775.65,512.862 2005.73,533.153 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1617.2,344.972 2005.73,533.153 
  "/>
<polyline clip-path="url(#clip592)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  429.907,531.715 663.635,588.115 
  "/>
<path clip-path="url(#clip592)" d="M1423.34 1240.57 L1391.34 1240.57 L1407.34 1272.57 L1423.34 1240.57 Z" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1840.07 761.892 L1808.07 761.892 L1824.07 793.892 L1840.07 761.892 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1832.57 221.556 L1800.57 221.556 L1816.57 253.556 L1832.57 221.556 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1480.43 477.59 L1448.43 477.59 L1464.43 509.59 L1480.43 477.59 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1293.58 1074.22 L1261.58 1074.22 L1277.58 1106.22 L1293.58 1074.22 Z" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1791.65 496.862 L1759.65 496.862 L1775.65 528.862 L1791.65 496.862 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M679.635 572.115 L647.635 572.115 L663.635 604.115 L679.635 572.115 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M827.639 789.057 L795.639 789.057 L811.639 821.057 L827.639 789.057 Z" fill="#78d6ce" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1120.84 1257.42 L1088.84 1257.42 L1104.84 1289.42 L1120.84 1257.42 Z" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M906.514 492.826 L874.514 492.826 L890.514 524.826 L906.514 492.826 Z" fill="#78d6ce" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1424.17 860.278 L1392.17 860.278 L1408.17 892.278 L1424.17 860.278 Z" fill="#d8c676" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1318.08 72.9544 L1286.08 72.9544 L1302.08 104.954 L1318.08 72.9544 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1182.31 880.255 L1150.31 880.255 L1166.31 912.255 L1182.31 880.255 Z" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1633.2 328.972 L1601.2 328.972 L1617.2 360.972 L1633.2 328.972 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1061.28 171.376 L1029.28 171.376 L1045.28 203.376 L1061.28 171.376 Z" fill="#78d6ce" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1408.15 283.046 L1376.15 283.046 L1392.15 315.046 L1408.15 283.046 Z" fill="#d8c676" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M711.202 1150.81 L679.202 1150.81 L695.202 1182.81 L711.202 1150.81 Z" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip592)" d="M1032.88 313.986 L1000.88 313.986 L1016.88 345.986 L1032.88 313.986 Z" fill="#78d6ce" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip592)" cx="1590.35" cy="744.29" r="14" fill="#d8c676" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip592)" cx="1174.36" cy="587.061" r="14" fill="#78d6ce" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip592)" cx="2009.84" cy="328.474" r="14" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip592)" cx="970.151" cy="1020.04" r="14" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip592)" cx="1595.03" cy="1066.22" r="14" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip592)" cx="831.619" cy="331.765" r="14" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip592)" cx="1616.89" cy="131.783" r="14" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip592)" cx="1250.77" cy="1479.3" r="14" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip592)" cx="2005.73" cy="533.153" r="14" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip592)" cx="429.907" cy="531.715" r="14" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
</svg>
<h2 id="Species-functional-roles-1"><a class="docs-heading-anchor" href="#Species-functional-roles-1">Species functional roles</a><a class="docs-heading-anchor-permalink" href="#Species-functional-roles-1" title="Permalink"></a></h2><p>We can finally look at the functional roles of the species:</p><pre><code class="language-julia">roles = functional_cartography(N, best_m)</code></pre><pre><code class="language-none">Dict{String,Tuple{Float64,Float64}} with 28 entries:
  &quot;Ctenophthalmus inornatus&quot; =&gt; (-0.0764719, 0.56)
  &quot;Chionomys nivalis&quot;        =&gt; (1.30002, 0.0)
  &quot;Hystrichopsylla satunini&quot; =&gt; (-0.83666, 0.444444)
  &quot;Ceratophyllus sciurorum&quot;  =&gt; (-0.447214, 0.0)
  &quot;Apodemus sylvaticus&quot;      =&gt; (1.78885, 0.726562)
  &quot;Ctenophthalmus shovi&quot;     =&gt; (0.0, 0.56)
  &quot;Amalaraeus penicilliger&quot;  =&gt; (-0.57735, 0.0)
  &quot;Megabothris turbidus&quot;     =&gt; (-0.0764719, 0.75)
  &quot;Myoxopsylla jordani&quot;      =&gt; (1.1547, 0.625)
  &quot;Amphipsylla georgica&quot;     =&gt; (-1.45297, 0.5)
  &quot;Sorex araneus&quot;            =&gt; (0.0, 0.0)
  &quot;Rhadinopsylla integella&quot;  =&gt; (-1.45297, 0.5)
  &quot;Apodemus mystacinus&quot;      =&gt; (1.67332, 0.617284)
  &quot;Microtus majori&quot;          =&gt; (0.83666, 0.59375)
  &quot;Ctenophthalmus proximus&quot;  =&gt; (0.0, 0.56)
  &quot;Myoxus glis&quot;              =&gt; (-0.57735, 0.0)
  &quot;Nosopsyllus fasciatus&quot;    =&gt; (-0.447214, 0.5)
  &quot;Leptopsylla segnis&quot;       =&gt; (0.0, 0.375)
  &quot;Palaeopsylla caucasica&quot;   =&gt; (-0.447214, 0.0)
  ⋮                          =&gt; ⋮</code></pre><p>This function returns a tuple (an unmodifiable set of values) of coordinates for every species, indicating its within-module contribution, and its participation coefficient. These results can be plotted to separate species in module hubs, network hubs, peripherals, and connectors. Note that in the context of ecological networks, this classification is commonly used. It derives from previous work on metabolic networks, which subdivides the plane in 7 (rather than 4) regions. For the sake of completeness, we have added the 7 regions to the plot as well.</p><pre><code class="language-">plot(Shape([-2, 2.5, 2.5, -2], [0, 0, 0.05, 0.05]), lab=&quot;&quot;, frame=:box, lc=:grey, opacity=0.3, c=:grey, lw=0.0, grid=false, margin = 10mm) #R1
plot!(Shape([-2, 2.5, 2.5, -2], [0.05, 0.05, 0.62, 0.62]), lab=&quot;&quot;, c=:transparent) #R2
plot!(Shape([-2, 2.5, 2.5, -2], [0.62, 0.62, 0.80, 0.80]), lab=&quot;&quot;, lc=:grey, opacity=0.3, c=:grey, lw=0.0) #R3
plot!(Shape([-2, 2.5, 2.5, -2], [0.80, 0.80, 1.0, 1.0]), lab=&quot;&quot;, c=:transparent) #R4

plot!(Shape([2.5, 3.0, 3.0, 2.5], [0, 0, 0.3, 0.3]), lab=&quot;&quot;, c=:transparent) #R5
plot!(Shape([2.5, 3.0, 3.0, 2.5], [0.3, 0.3, 0.75, 0.75]), lab=&quot;&quot;, lc=:grey, opacity=0.3, c=:grey, lw=0.0) #R6
plot!(Shape([2.5, 3.0, 3.0, 2.5], [0.75, 0.75, 1.0, 1.0]), lab=&quot;&quot;, c=:transparent) #R7

vline!([2.5], c=:black, ls=:dot, lw=2.0)
hline!([0.62], c=:black, ls=:dot, lw=2.0)
collect(values(roles)) |&gt; x -&gt; scatter!(x, leg=false, c=:white)
yaxis!(&quot;Among-module connectivity&quot;, (0,1))
xaxis!(&quot;Within-module degree&quot;, (-2, 3))</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../interface/highlevel/">« Core functions</a><a class="docs-footer-nextpage" href="../integration_mangal/">Integration with Mangal »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 27 November 2020 02:02">Friday 27 November 2020</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
