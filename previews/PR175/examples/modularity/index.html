<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Modularity · EcologicalNetworks</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="EcologicalNetworks logo"/></a><div class="docs-package-name"><span class="docs-autofit">EcologicalNetworks</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Index</a></li><li><span class="tocitem">Interface</span><ul><li><a class="tocitem" href="../../interface/types/">Types</a></li><li><a class="tocitem" href="../../interface/conversions/">Conversions</a></li><li><a class="tocitem" href="../../interface/highlevel/">Core functions</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>Modularity</a><ul class="internal"><li><a class="tocitem" href="#Generating-modular-partitions-1"><span>Generating modular partitions</span></a></li><li><a class="tocitem" href="#Measuring-modularity-1"><span>Measuring modularity</span></a></li><li><a class="tocitem" href="#Species-functional-roles-1"><span>Species functional roles</span></a></li></ul></li><li><a class="tocitem" href="../integration_mangal/">Integration with Mangal</a></li><li><a class="tocitem" href="../beta-diversity/">Network beta-diversity</a></li><li><a class="tocitem" href="../extinctions/">Extinctions</a></li></ul></li><li><span class="tocitem">Basic measures</span><ul><li><a class="tocitem" href="../../properties/links/">Links</a></li><li><a class="tocitem" href="../../properties/modularity/">Modularity</a></li><li><a class="tocitem" href="../../properties/nestedness/">Nestedness</a></li><li><a class="tocitem" href="../../properties/motifs/">Motifs</a></li><li><a class="tocitem" href="../../properties/paths/">Centrality and paths</a></li><li><a class="tocitem" href="../../properties/overlap/">Overlap and similarity</a></li></ul></li><li><span class="tocitem">Advanced information</span><ul><li><a class="tocitem" href="../../properties/betadiversity/">Beta-diversity</a></li><li><a class="tocitem" href="../../properties/resilience/">Resilience</a></li><li><a class="tocitem" href="../../properties/information/">Information theory</a></li></ul></li><li><span class="tocitem">Generating networks</span><ul><li><a class="tocitem" href="../../random/null/">Null models</a></li><li><a class="tocitem" href="../../random/structure/">Structural models</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Modularity</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Modularity</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/EcoJulia/EcologicalNetworks.jl/blob/master/docs/src/examples/modularity.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><p>In this example, we will show how the modular structure of an ecological network can be optimized. Finding the optimal modular structure can be a time-consuming process, as it relies on heuristic which are not guaranteed to converge to the global maximum. There is no elegant alternative to trying multiple approaches, repeating the process multiple times, and having some luck.</p><pre><code class="language-julia">using EcologicalNetworks
using EcologicalNetworksPlots
using Plots</code></pre><h2 id="Generating-modular-partitions-1"><a class="docs-heading-anchor" href="#Generating-modular-partitions-1">Generating modular partitions</a><a class="docs-heading-anchor-permalink" href="#Generating-modular-partitions-1" title="Permalink"></a></h2><p>For the first approach, we will generate random partitions of the species across 3 to 12 modules, and evaluate 20 replicate attempts for each of these combinations. The output we are interested in is the number of modules, and the overall modularity.</p><pre><code class="language-julia">all_hp_data = filter(x -&gt; occursin(&quot;Hadfield&quot;, x.Reference), web_of_life());
ids = getfield.(all_hp_data, :ID);
networks = convert.(BinaryNetwork, web_of_life.(ids));
N = networks[1]

n = repeat(3:12, outer=20)
m = Array{Dict}(undef, length(n))

for i in eachindex(n)
  # Each run returns the network and its modules
  # We discard the network, and assign the modules to our object
  _, m[i] = n_random_modules(n[i])(N) |&gt; x -&gt; brim(x...)
end</code></pre><pre><code class="language-">p1 = scatter(c, q, c=:grey, msw=0.0, leg=false, frame=:origin, grid=false, margin = 10mm)
xaxis!(p1, &quot;Number of modules&quot;)
yaxis!(p1, &quot;Modularity&quot;, (0, 0.5))</code></pre><h2 id="Measuring-modularity-1"><a class="docs-heading-anchor" href="#Measuring-modularity-1">Measuring modularity</a><a class="docs-heading-anchor-permalink" href="#Measuring-modularity-1" title="Permalink"></a></h2><p>Now that we have the modular partition for every attempt, we can count the modules in it, and measure its modularity:</p><pre><code class="language-julia">q = map(x -&gt; Q(N,x), m);
c = (m .|&gt; values |&gt; collect) .|&gt; unique .|&gt; length;</code></pre><pre><code class="language-none">200-element Array{Int64,1}:
 3
 3
 4
 4
 4
 5
 4
 5
 4
 6
 ⋮
 4
 4
 6
 4
 5
 6
 4
 6
 5</code></pre><p>Out of all attempts, we want to get the most modular one, <em>i.e.</em> the one with highest modularity. In some simple problems, there may be several partitions with the highest value, so we can either take the first, or one at random:</p><pre><code class="language-julia">optimal = rand(findall(q.== maximum(q)));
best_m = m[optimal];</code></pre><pre><code class="language-none">Dict{String,Int64} with 28 entries:
  &quot;Ctenophthalmus inornatus&quot; =&gt; 3
  &quot;Chionomys nivalis&quot;        =&gt; 3
  &quot;Hystrichopsylla satunini&quot; =&gt; 1
  &quot;Ceratophyllus sciurorum&quot;  =&gt; 5
  &quot;Apodemus sylvaticus&quot;      =&gt; 5
  &quot;Ctenophthalmus shovi&quot;     =&gt; 1
  &quot;Amalaraeus penicilliger&quot;  =&gt; 2
  &quot;Megabothris turbidus&quot;     =&gt; 3
  &quot;Myoxopsylla jordani&quot;      =&gt; 4
  &quot;Amphipsylla georgica&quot;     =&gt; 3
  &quot;Sorex araneus&quot;            =&gt; 1
  &quot;Rhadinopsylla integella&quot;  =&gt; 3
  &quot;Apodemus mystacinus&quot;      =&gt; 1
  &quot;Microtus majori&quot;          =&gt; 1
  &quot;Ctenophthalmus proximus&quot;  =&gt; 1
  &quot;Myoxus glis&quot;              =&gt; 4
  &quot;Nosopsyllus fasciatus&quot;    =&gt; 5
  &quot;Leptopsylla segnis&quot;       =&gt; 1
  &quot;Palaeopsylla caucasica&quot;   =&gt; 5
  ⋮                          =&gt; ⋮</code></pre><p>This can be plotted using <code>EcologicalNetworksPlots</code>:</p><pre><code class="language-julia">I = initial(RandomInitialLayout, N)
for step in 1:4000
  position!(SpringElectric(1.2; gravity=0.1), I, N)
end
p2 = plot(I, N, aspectratio=1)
scatter!(p2, I, N, bipartite=true, nodefill=best_m, markercolor=:isolum)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip190">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip190)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip191">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip190)" d="
M86.9921 1521.01 L2352.76 1521.01 L2352.76 47.2441 L86.9921 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip192">
    <rect x="86" y="47" width="2267" height="1475"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  938.99,1213.57 1498.95,1111.44 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  938.99,1213.57 957.625,883.772 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  684.645,747.622 938.99,1213.57 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  938.99,1213.57 956.064,612.917 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  938.99,1213.57 1425.43,1295.7 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  750.127,960.548 938.99,1213.57 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  938.99,1213.57 1143.37,1326.78 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  823.883,1479.3 938.99,1213.57 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1240.25,729.475 1498.95,1111.44 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  957.625,883.772 1240.25,729.475 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  684.645,747.622 1240.25,729.475 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  956.064,612.917 1240.25,729.475 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1240.25,729.475 1425.43,1295.7 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  750.127,960.548 1240.25,729.475 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1240.25,729.475 1505.85,290.56 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1240.25,729.475 1610.1,520.279 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1240.25,729.475 1716.45,1035.38 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1240.25,729.475 1371.33,475.206 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1143.37,1326.78 1240.25,729.475 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  655.265,1130.42 1240.25,729.475 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1240.25,729.475 1502.64,896.044 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  936.879,332.698 1240.25,729.475 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1215.06,421.794 1240.25,729.475 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1240.25,729.475 1350.14,904.629 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  530.486,665.633 957.625,883.772 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  530.486,665.633 684.645,747.622 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  530.486,665.633 956.064,612.917 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  530.486,665.633 750.127,960.548 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1498.95,1111.44 1639.99,742.286 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  957.625,883.772 1639.99,742.286 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  956.064,612.917 1639.99,742.286 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1425.43,1295.7 1639.99,742.286 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1505.85,290.56 1639.99,742.286 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1610.1,520.279 1639.99,742.286 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1639.99,742.286 1716.45,1035.38 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1502.64,896.044 1639.99,742.286 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1639.99,742.286 1917.31,662.547 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1236.15,1107.92 1498.95,1111.44 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  957.625,883.772 1236.15,1107.92 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  956.064,612.917 1236.15,1107.92 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1236.15,1107.92 1425.43,1295.7 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  750.127,960.548 1236.15,1107.92 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1236.15,1107.92 1716.45,1035.38 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1143.37,1326.78 1236.15,1107.92 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1236.15,1107.92 1502.64,896.044 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  956.064,612.917 1216.84,217.438 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1216.84,217.438 1505.85,290.56 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  522.442,940.084 957.625,883.772 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  522.442,940.084 684.645,747.622 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  522.442,940.084 956.064,612.917 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  522.442,940.084 750.127,960.548 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  522.442,940.084 655.265,1130.42 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1498.95,1111.44 1718.28,1310.88 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1425.43,1295.7 1718.28,1310.88 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1716.45,1035.38 1718.28,1310.88 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  719.445,492.683 957.625,883.772 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  684.645,747.622 719.445,492.683 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  719.445,492.683 956.064,612.917 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  719.445,492.683 750.127,960.548 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  719.445,492.683 936.879,332.698 
  "/>
<polyline clip-path="url(#clip192)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1505.85,290.56 1611.34,88.9544 
  "/>
<path clip-path="url(#clip192)" d="M1514.95 1095.44 L1482.95 1095.44 L1498.95 1127.44 L1514.95 1095.44 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M973.625 867.772 L941.625 867.772 L957.625 899.772 L973.625 867.772 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M700.645 731.622 L668.645 731.622 L684.645 763.622 L700.645 731.622 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M972.064 596.917 L940.064 596.917 L956.064 628.917 L972.064 596.917 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M1441.43 1279.7 L1409.43 1279.7 L1425.43 1311.7 L1441.43 1279.7 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M766.127 944.548 L734.127 944.548 L750.127 976.548 L766.127 944.548 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M1521.85 274.56 L1489.85 274.56 L1505.85 306.56 L1521.85 274.56 Z" fill="#d8c676" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M1626.1 504.279 L1594.1 504.279 L1610.1 536.279 L1626.1 504.279 Z" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M1732.45 1019.38 L1700.45 1019.38 L1716.45 1051.38 L1732.45 1019.38 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M1387.33 459.206 L1355.33 459.206 L1371.33 491.206 L1387.33 459.206 Z" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M1159.37 1310.78 L1127.37 1310.78 L1143.37 1342.78 L1159.37 1310.78 Z" fill="#78d6ce" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M671.265 1114.42 L639.265 1114.42 L655.265 1146.42 L671.265 1114.42 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M1518.64 880.044 L1486.64 880.044 L1502.64 912.044 L1518.64 880.044 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M952.879 316.698 L920.879 316.698 L936.879 348.698 L952.879 316.698 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M1231.06 405.794 L1199.06 405.794 L1215.06 437.794 L1231.06 405.794 Z" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M839.883 1463.3 L807.883 1463.3 L823.883 1495.3 L839.883 1463.3 Z" fill="#78d6ce" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M1933.31 646.547 L1901.31 646.547 L1917.31 678.547 L1933.31 646.547 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip192)" d="M1366.14 888.629 L1334.14 888.629 L1350.14 920.629 L1366.14 888.629 Z" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip192)" cx="938.99" cy="1213.57" r="14" fill="#78d6ce" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip192)" cx="1240.25" cy="729.475" r="14" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip192)" cx="530.486" cy="665.633" r="14" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip192)" cx="1639.99" cy="742.286" r="14" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip192)" cx="1236.15" cy="1107.92" r="14" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip192)" cx="1216.84" cy="217.438" r="14" fill="#d8c676" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip192)" cx="522.442" cy="940.084" r="14" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip192)" cx="1718.28" cy="1310.88" r="14" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip192)" cx="719.445" cy="492.683" r="14" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip192)" cx="1611.34" cy="88.9544" r="14" fill="#d8c676" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
</svg>
<h2 id="Species-functional-roles-1"><a class="docs-heading-anchor" href="#Species-functional-roles-1">Species functional roles</a><a class="docs-heading-anchor-permalink" href="#Species-functional-roles-1" title="Permalink"></a></h2><p>We can finally look at the functional roles of the species:</p><pre><code class="language-julia">roles = functional_cartography(N, best_m)</code></pre><pre><code class="language-none">Dict{String,Tuple{Float64,Float64}} with 28 entries:
  &quot;Ctenophthalmus inornatus&quot; =&gt; (-0.0764719, 0.56)
  &quot;Chionomys nivalis&quot;        =&gt; (1.30002, 0.0)
  &quot;Hystrichopsylla satunini&quot; =&gt; (-0.83666, 0.444444)
  &quot;Ceratophyllus sciurorum&quot;  =&gt; (-0.447214, 0.0)
  &quot;Apodemus sylvaticus&quot;      =&gt; (1.78885, 0.726562)
  &quot;Ctenophthalmus shovi&quot;     =&gt; (0.0, 0.56)
  &quot;Amalaraeus penicilliger&quot;  =&gt; (-0.57735, 0.0)
  &quot;Megabothris turbidus&quot;     =&gt; (-0.0764719, 0.75)
  &quot;Myoxopsylla jordani&quot;      =&gt; (1.1547, 0.625)
  &quot;Amphipsylla georgica&quot;     =&gt; (-1.45297, 0.5)
  &quot;Sorex araneus&quot;            =&gt; (0.0, 0.0)
  &quot;Rhadinopsylla integella&quot;  =&gt; (-1.45297, 0.5)
  &quot;Apodemus mystacinus&quot;      =&gt; (1.67332, 0.617284)
  &quot;Microtus majori&quot;          =&gt; (0.83666, 0.59375)
  &quot;Ctenophthalmus proximus&quot;  =&gt; (0.0, 0.56)
  &quot;Myoxus glis&quot;              =&gt; (-0.57735, 0.0)
  &quot;Nosopsyllus fasciatus&quot;    =&gt; (-0.447214, 0.5)
  &quot;Leptopsylla segnis&quot;       =&gt; (0.0, 0.375)
  &quot;Palaeopsylla caucasica&quot;   =&gt; (-0.447214, 0.0)
  ⋮                          =&gt; ⋮</code></pre><p>This function returns a tuple (an unmodifiable set of values) of coordinates for every species, indicating its within-module contribution, and its participation coefficient. These results can be plotted to separate species in module hubs, network hubs, peripherals, and connectors. Note that in the context of ecological networks, this classification is commonly used. It derives from previous work on metabolic networks, which subdivides the plane in 7 (rather than 4) regions. For the sake of completeness, we have added the 7 regions to the plot as well.</p><pre><code class="language-">plot(Shape([-2, 2.5, 2.5, -2], [0, 0, 0.05, 0.05]), lab=&quot;&quot;, frame=:box, lc=:grey, opacity=0.3, c=:grey, lw=0.0, grid=false, margin = 10mm) #R1
plot!(Shape([-2, 2.5, 2.5, -2], [0.05, 0.05, 0.62, 0.62]), lab=&quot;&quot;, c=:transparent) #R2
plot!(Shape([-2, 2.5, 2.5, -2], [0.62, 0.62, 0.80, 0.80]), lab=&quot;&quot;, lc=:grey, opacity=0.3, c=:grey, lw=0.0) #R3
plot!(Shape([-2, 2.5, 2.5, -2], [0.80, 0.80, 1.0, 1.0]), lab=&quot;&quot;, c=:transparent) #R4

plot!(Shape([2.5, 3.0, 3.0, 2.5], [0, 0, 0.3, 0.3]), lab=&quot;&quot;, c=:transparent) #R5
plot!(Shape([2.5, 3.0, 3.0, 2.5], [0.3, 0.3, 0.75, 0.75]), lab=&quot;&quot;, lc=:grey, opacity=0.3, c=:grey, lw=0.0) #R6
plot!(Shape([2.5, 3.0, 3.0, 2.5], [0.75, 0.75, 1.0, 1.0]), lab=&quot;&quot;, c=:transparent) #R7

vline!([2.5], c=:black, ls=:dot, lw=2.0)
hline!([0.62], c=:black, ls=:dot, lw=2.0)
collect(values(roles)) |&gt; x -&gt; scatter!(x, leg=false, c=:white)
yaxis!(&quot;Among-module connectivity&quot;, (0,1))
xaxis!(&quot;Within-module degree&quot;, (-2, 3))</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../interface/highlevel/">« Core functions</a><a class="docs-footer-nextpage" href="../integration_mangal/">Integration with Mangal »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 27 November 2020 02:05">Friday 27 November 2020</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
