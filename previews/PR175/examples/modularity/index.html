<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Modularity · EcologicalNetworks</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="EcologicalNetworks logo"/></a><div class="docs-package-name"><span class="docs-autofit">EcologicalNetworks</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Index</a></li><li><span class="tocitem">Interface</span><ul><li><a class="tocitem" href="../../interface/types/">Types</a></li><li><a class="tocitem" href="../../interface/conversions/">Conversions</a></li><li><a class="tocitem" href="../../interface/highlevel/">Core functions</a></li></ul></li><li><span class="tocitem">Examples</span><ul><li class="is-active"><a class="tocitem" href>Modularity</a><ul class="internal"><li><a class="tocitem" href="#Generating-modular-partitions-1"><span>Generating modular partitions</span></a></li><li><a class="tocitem" href="#Measuring-modularity-1"><span>Measuring modularity</span></a></li><li><a class="tocitem" href="#Species-functional-roles-1"><span>Species functional roles</span></a></li></ul></li><li><a class="tocitem" href="../integration_mangal/">Integration with Mangal</a></li><li><a class="tocitem" href="../beta-diversity/">Network beta-diversity</a></li><li><a class="tocitem" href="../extinctions/">Extinctions</a></li></ul></li><li><span class="tocitem">Basic measures</span><ul><li><a class="tocitem" href="../../properties/links/">Links</a></li><li><a class="tocitem" href="../../properties/modularity/">Modularity</a></li><li><a class="tocitem" href="../../properties/nestedness/">Nestedness</a></li><li><a class="tocitem" href="../../properties/motifs/">Motifs</a></li><li><a class="tocitem" href="../../properties/paths/">Centrality and paths</a></li><li><a class="tocitem" href="../../properties/overlap/">Overlap and similarity</a></li></ul></li><li><span class="tocitem">Advanced information</span><ul><li><a class="tocitem" href="../../properties/betadiversity/">Beta-diversity</a></li><li><a class="tocitem" href="../../properties/resilience/">Resilience</a></li><li><a class="tocitem" href="../../properties/information/">Information theory</a></li></ul></li><li><span class="tocitem">Generating networks</span><ul><li><a class="tocitem" href="../../random/null/">Null models</a></li><li><a class="tocitem" href="../../random/structure/">Structural models</a></li></ul></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Examples</a></li><li class="is-active"><a href>Modularity</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Modularity</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/EcoJulia/EcologicalNetworks.jl/blob/master/docs/src/examples/modularity.md" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><p>In this example, we will show how the modular structure of an ecological network can be optimized. Finding the optimal modular structure can be a time-consuming process, as it relies on heuristic which are not guaranteed to converge to the global maximum. There is no elegant alternative to trying multiple approaches, repeating the process multiple times, and having some luck.</p><pre><code class="language-julia">using EcologicalNetworks
using EcologicalNetworksPlots
using Plots</code></pre><h2 id="Generating-modular-partitions-1"><a class="docs-heading-anchor" href="#Generating-modular-partitions-1">Generating modular partitions</a><a class="docs-heading-anchor-permalink" href="#Generating-modular-partitions-1" title="Permalink"></a></h2><p>For the first approach, we will generate random partitions of the species across 3 to 12 modules, and evaluate 20 replicate attempts for each of these combinations. The output we are interested in is the number of modules, and the overall modularity.</p><pre><code class="language-julia">all_hp_data = filter(x -&gt; occursin(&quot;Hadfield&quot;, x.Reference), web_of_life());
ids = getfield.(all_hp_data, :ID);
networks = convert.(BinaryNetwork, web_of_life.(ids));
N = networks[1]

n = repeat(3:12, outer=20)
m = Array{Dict}(undef, length(n))

for i in eachindex(n)
  # Each run returns the network and its modules
  # We discard the network, and assign the modules to our object
  _, m[i] = n_random_modules(n[i])(N) |&gt; x -&gt; brim(x...)
end</code></pre><pre><code class="language-">p1 = scatter(c, q, c=:grey, msw=0.0, leg=false, frame=:origin, grid=false, margin = 10mm)
xaxis!(p1, &quot;Number of modules&quot;)
yaxis!(p1, &quot;Modularity&quot;, (0, 0.5))</code></pre><h2 id="Measuring-modularity-1"><a class="docs-heading-anchor" href="#Measuring-modularity-1">Measuring modularity</a><a class="docs-heading-anchor-permalink" href="#Measuring-modularity-1" title="Permalink"></a></h2><p>Now that we have the modular partition for every attempt, we can count the modules in it, and measure its modularity:</p><pre><code class="language-julia">q = map(x -&gt; Q(N,x), m);
c = (m .|&gt; values |&gt; collect) .|&gt; unique .|&gt; length;</code></pre><pre><code class="language-none">200-element Array{Int64,1}:
 3
 4
 4
 4
 4
 6
 4
 7
 6
 6
 ⋮
 3
 5
 3
 4
 5
 6
 5
 6
 5</code></pre><p>Out of all attempts, we want to get the most modular one, <em>i.e.</em> the one with highest modularity. In some simple problems, there may be several partitions with the highest value, so we can either take the first, or one at random:</p><pre><code class="language-julia">optimal = rand(findall(q.== maximum(q)));
best_m = m[optimal];</code></pre><pre><code class="language-none">Dict{String,Int64} with 28 entries:
  &quot;Ctenophthalmus inornatus&quot; =&gt; 1
  &quot;Chionomys nivalis&quot;        =&gt; 1
  &quot;Hystrichopsylla satunini&quot; =&gt; 3
  &quot;Ceratophyllus sciurorum&quot;  =&gt; 4
  &quot;Apodemus sylvaticus&quot;      =&gt; 4
  &quot;Ctenophthalmus shovi&quot;     =&gt; 3
  &quot;Amalaraeus penicilliger&quot;  =&gt; 5
  &quot;Megabothris turbidus&quot;     =&gt; 1
  &quot;Myoxopsylla jordani&quot;      =&gt; 2
  &quot;Amphipsylla georgica&quot;     =&gt; 1
  &quot;Sorex araneus&quot;            =&gt; 3
  &quot;Rhadinopsylla integella&quot;  =&gt; 1
  &quot;Apodemus mystacinus&quot;      =&gt; 3
  &quot;Microtus majori&quot;          =&gt; 3
  &quot;Ctenophthalmus proximus&quot;  =&gt; 3
  &quot;Myoxus glis&quot;              =&gt; 2
  &quot;Nosopsyllus fasciatus&quot;    =&gt; 4
  &quot;Leptopsylla segnis&quot;       =&gt; 3
  &quot;Palaeopsylla caucasica&quot;   =&gt; 4
  ⋮                          =&gt; ⋮</code></pre><p>This can be plotted using <code>EcologicalNetworksPlots</code>:</p><pre><code class="language-julia">I = initial(RandomInitialLayout, N)
for step in 1:4000
  position!(SpringElectric(1.2; gravity=0.1), I, N)
end
p2 = plot(I, N, aspectratio=1)
scatter!(p2, I, N, bipartite=true, nodefill=best_m, markercolor=:isolum)</code></pre><?xml version="1.0" encoding="utf-8"?>
<svg xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" width="600" height="400" viewBox="0 0 2400 1600">
<defs>
  <clipPath id="clip960">
    <rect x="0" y="0" width="2400" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip960)" d="
M0 1600 L2400 1600 L2400 0 L0 0  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip961">
    <rect x="480" y="0" width="1681" height="1600"/>
  </clipPath>
</defs>
<path clip-path="url(#clip960)" d="
M86.9921 1521.01 L2352.76 1521.01 L2352.76 47.2441 L86.9921 47.2441  Z
  " fill="#ffffff" fill-rule="evenodd" fill-opacity="1"/>
<defs>
  <clipPath id="clip962">
    <rect x="86" y="47" width="2267" height="1475"/>
  </clipPath>
</defs>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1194.41,1240.27 1499.86,851.8 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  967.844,937.052 1194.41,1240.27 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  747.369,1091.99 1194.41,1240.27 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1142.43,880.736 1194.41,1240.27 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1194.41,1240.27 1578.66,1019.75 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  971.527,1127.51 1194.41,1240.27 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1194.41,1240.27 1376.02,1180.08 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1194.41,1240.27 1232.15,1479.3 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1098.77,621.897 1499.86,851.8 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  967.844,937.052 1098.77,621.897 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  747.369,1091.99 1098.77,621.897 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1098.77,621.897 1142.43,880.736 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1098.77,621.897 1578.66,1019.75 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  971.527,1127.51 1098.77,621.897 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1098.77,621.897 1423.48,277.767 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1098.77,621.897 1236.07,363.037 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1098.77,621.897 1662.68,741.766 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1047.62,296.129 1098.77,621.897 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1098.77,621.897 1376.02,1180.08 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  797.963,581.935 1098.77,621.897 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1098.77,621.897 1349.25,699.373 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  650.527,671.62 1098.77,621.897 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  979.501,398.428 1098.77,621.897 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  856.074,396.42 1098.77,621.897 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  845.675,1254.97 967.844,937.052 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  747.369,1091.99 845.675,1254.97 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  845.675,1254.97 1142.43,880.736 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  845.675,1254.97 971.527,1127.51 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1499.86,851.8 1510.68,583.141 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  967.844,937.052 1510.68,583.141 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1142.43,880.736 1510.68,583.141 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1510.68,583.141 1578.66,1019.75 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1423.48,277.767 1510.68,583.141 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1236.07,363.037 1510.68,583.141 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1510.68,583.141 1662.68,741.766 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1349.25,699.373 1510.68,583.141 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1510.68,583.141 1719.64,436.942 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1359.82,997.066 1499.86,851.8 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  967.844,937.052 1359.82,997.066 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1142.43,880.736 1359.82,997.066 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1359.82,997.066 1578.66,1019.75 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  971.527,1127.51 1359.82,997.066 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1359.82,997.066 1662.68,741.766 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1359.82,997.066 1376.02,1180.08 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1349.25,699.373 1359.82,997.066 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1142.43,880.736 1337.24,450.734 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1337.24,450.734 1423.48,277.767 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  796.221,832.663 967.844,937.052 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  747.369,1091.99 796.221,832.663 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  796.221,832.663 1142.43,880.736 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  796.221,832.663 971.527,1127.51 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  796.221,832.663 797.963,581.935 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1499.86,851.8 1789.22,921.316 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1578.66,1019.75 1789.22,921.316 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1662.68,741.766 1789.22,921.316 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  651.144,941.746 967.844,937.052 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  651.144,941.746 747.369,1091.99 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  651.144,941.746 1142.43,880.736 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  651.144,941.746 971.527,1127.51 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  650.527,671.62 651.144,941.746 
  "/>
<polyline clip-path="url(#clip962)" style="stroke:#a9a9a9; stroke-width:4; stroke-opacity:1; fill:none" points="
  1423.48,277.767 1481,88.9544 
  "/>
<path clip-path="url(#clip962)" d="M1515.86 835.8 L1483.86 835.8 L1499.86 867.8 L1515.86 835.8 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M983.844 921.052 L951.844 921.052 L967.844 953.052 L983.844 921.052 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M763.369 1075.99 L731.369 1075.99 L747.369 1107.99 L763.369 1075.99 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M1158.43 864.736 L1126.43 864.736 L1142.43 896.736 L1158.43 864.736 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M1594.66 1003.75 L1562.66 1003.75 L1578.66 1035.75 L1594.66 1003.75 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M987.527 1111.51 L955.527 1111.51 L971.527 1143.51 L987.527 1111.51 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M1439.48 261.767 L1407.48 261.767 L1423.48 293.767 L1439.48 261.767 Z" fill="#78d6ce" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M1252.07 347.037 L1220.07 347.037 L1236.07 379.037 L1252.07 347.037 Z" fill="#d8c676" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M1678.68 725.766 L1646.68 725.766 L1662.68 757.766 L1678.68 725.766 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M1063.62 280.129 L1031.62 280.129 L1047.62 312.129 L1063.62 280.129 Z" fill="#d8c676" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M1392.02 1164.08 L1360.02 1164.08 L1376.02 1196.08 L1392.02 1164.08 Z" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M813.963 565.935 L781.963 565.935 L797.963 597.935 L813.963 565.935 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M1365.25 683.373 L1333.25 683.373 L1349.25 715.373 L1365.25 683.373 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M666.527 655.62 L634.527 655.62 L650.527 687.62 L666.527 655.62 Z" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M995.501 382.428 L963.501 382.428 L979.501 414.428 L995.501 382.428 Z" fill="#d8c676" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M1248.15 1463.3 L1216.15 1463.3 L1232.15 1495.3 L1248.15 1463.3 Z" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M1735.64 420.942 L1703.64 420.942 L1719.64 452.942 L1735.64 420.942 Z" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<path clip-path="url(#clip962)" d="M872.074 380.42 L840.074 380.42 L856.074 412.42 L872.074 380.42 Z" fill="#d8c676" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip962)" cx="1194.41" cy="1240.27" r="14" fill="#ffb281" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip962)" cx="1098.77" cy="621.897" r="14" fill="#d8c676" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip962)" cx="845.675" cy="1254.97" r="14" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip962)" cx="1510.68" cy="583.141" r="14" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip962)" cx="1359.82" cy="997.066" r="14" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip962)" cx="1337.24" cy="450.734" r="14" fill="#78d6ce" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip962)" cx="796.221" cy="832.663" r="14" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip962)" cx="1789.22" cy="921.316" r="14" fill="#9bd494" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip962)" cx="651.144" cy="941.746" r="14" fill="#6fd1ff" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
<circle clip-path="url(#clip962)" cx="1481" cy="88.9544" r="14" fill="#78d6ce" fill-rule="evenodd" fill-opacity="1" stroke="#000000" stroke-opacity="1" stroke-width="3.2"/>
</svg>
<h2 id="Species-functional-roles-1"><a class="docs-heading-anchor" href="#Species-functional-roles-1">Species functional roles</a><a class="docs-heading-anchor-permalink" href="#Species-functional-roles-1" title="Permalink"></a></h2><p>We can finally look at the functional roles of the species:</p><pre><code class="language-julia">roles = functional_cartography(N, best_m)</code></pre><pre><code class="language-none">Dict{String,Tuple{Float64,Float64}} with 28 entries:
  &quot;Ctenophthalmus inornatus&quot; =&gt; (-0.0764719, 0.56)
  &quot;Chionomys nivalis&quot;        =&gt; (1.30002, 0.0)
  &quot;Hystrichopsylla satunini&quot; =&gt; (-0.83666, 0.444444)
  &quot;Ceratophyllus sciurorum&quot;  =&gt; (-0.447214, 0.0)
  &quot;Apodemus sylvaticus&quot;      =&gt; (1.78885, 0.726562)
  &quot;Ctenophthalmus shovi&quot;     =&gt; (0.0, 0.56)
  &quot;Amalaraeus penicilliger&quot;  =&gt; (-0.57735, 0.0)
  &quot;Megabothris turbidus&quot;     =&gt; (-0.0764719, 0.75)
  &quot;Myoxopsylla jordani&quot;      =&gt; (1.1547, 0.625)
  &quot;Amphipsylla georgica&quot;     =&gt; (-1.45297, 0.5)
  &quot;Sorex araneus&quot;            =&gt; (0.0, 0.0)
  &quot;Rhadinopsylla integella&quot;  =&gt; (-1.45297, 0.5)
  &quot;Apodemus mystacinus&quot;      =&gt; (1.67332, 0.617284)
  &quot;Microtus majori&quot;          =&gt; (0.83666, 0.59375)
  &quot;Ctenophthalmus proximus&quot;  =&gt; (0.0, 0.56)
  &quot;Myoxus glis&quot;              =&gt; (-0.57735, 0.0)
  &quot;Nosopsyllus fasciatus&quot;    =&gt; (-0.447214, 0.5)
  &quot;Leptopsylla segnis&quot;       =&gt; (0.0, 0.375)
  &quot;Palaeopsylla caucasica&quot;   =&gt; (-0.447214, 0.0)
  ⋮                          =&gt; ⋮</code></pre><p>This function returns a tuple (an unmodifiable set of values) of coordinates for every species, indicating its within-module contribution, and its participation coefficient. These results can be plotted to separate species in module hubs, network hubs, peripherals, and connectors. Note that in the context of ecological networks, this classification is commonly used. It derives from previous work on metabolic networks, which subdivides the plane in 7 (rather than 4) regions. For the sake of completeness, we have added the 7 regions to the plot as well.</p><pre><code class="language-">plot(Shape([-2, 2.5, 2.5, -2], [0, 0, 0.05, 0.05]), lab=&quot;&quot;, frame=:box, lc=:grey, opacity=0.3, c=:grey, lw=0.0, grid=false, margin = 10mm) #R1
plot!(Shape([-2, 2.5, 2.5, -2], [0.05, 0.05, 0.62, 0.62]), lab=&quot;&quot;, c=:transparent) #R2
plot!(Shape([-2, 2.5, 2.5, -2], [0.62, 0.62, 0.80, 0.80]), lab=&quot;&quot;, lc=:grey, opacity=0.3, c=:grey, lw=0.0) #R3
plot!(Shape([-2, 2.5, 2.5, -2], [0.80, 0.80, 1.0, 1.0]), lab=&quot;&quot;, c=:transparent) #R4

plot!(Shape([2.5, 3.0, 3.0, 2.5], [0, 0, 0.3, 0.3]), lab=&quot;&quot;, c=:transparent) #R5
plot!(Shape([2.5, 3.0, 3.0, 2.5], [0.3, 0.3, 0.75, 0.75]), lab=&quot;&quot;, lc=:grey, opacity=0.3, c=:grey, lw=0.0) #R6
plot!(Shape([2.5, 3.0, 3.0, 2.5], [0.75, 0.75, 1.0, 1.0]), lab=&quot;&quot;, c=:transparent) #R7

vline!([2.5], c=:black, ls=:dot, lw=2.0)
hline!([0.62], c=:black, ls=:dot, lw=2.0)
collect(values(roles)) |&gt; x -&gt; scatter!(x, leg=false, c=:white)
yaxis!(&quot;Among-module connectivity&quot;, (0,1))
xaxis!(&quot;Within-module degree&quot;, (-2, 3))</code></pre></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../interface/highlevel/">« Core functions</a><a class="docs-footer-nextpage" href="../integration_mangal/">Integration with Mangal »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 27 November 2020 02:00">Friday 27 November 2020</span>. Using Julia version 1.5.3.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
