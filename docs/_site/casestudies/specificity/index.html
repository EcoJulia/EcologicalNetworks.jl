<!DOCTYPE html>
<html lang="en">
<head>
  <script type="text/x-mathjax-config">
  MathJax.Hub.Config({
    extensions: ["tex2jax.js"],
    jax: ["input/TeX", "output/HTML-CSS"],
    tex2jax: {
      inlineMath: [ ['$','$'], ["\\(","\\)"] ],
      displayMath: [ ['$$','$$'], ["\\[","\\]"] ],
      processEscapes: true
    },
    "HTML-CSS": { availableFonts: ["TeX"] }
  });
  </script>
  <script src='https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.2/MathJax.js?config=TeX-MML-AM_CHTML'></script>

  <link href="https://use.fontawesome.com/releases/v5.0.2/css/all.css" rel="stylesheet">

  <script src="//code.jquery.com/jquery-latest.min.js"></script>

  <script src="https://cdn.plot.ly/plotly-latest.min.js"></script>

  <link rel='stylesheet' href='//cdn.jsdelivr.net/npm/hack-font@3.3.0/build/web/hack.css'>

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css" integrity="sha384-Gn5384xqQ1aoWXA+058RXPxPg6fy4IWvTNh0E263XmFcJlSAwiGgFAW/dAiS6JXm" crossorigin="anonymous">

  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <title>EcologicalNetwork.jl - Measuring species specificity</title>
  <link rel="stylesheet" href="/styles/main.css">
</head>

<body>

  <nav class="navbar navbar-expand-lg fixed-top">
    <div class="container">
      <!-- <a class="navbar-brand" href="#">
        <img src="/logo.png" alt="">
      </a> -->
      <a class="navbar-brand" href="/">EcologicalNetwork.jl</a>
      <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#navbarSupportedContent" aria-controls="navbarSupportedContent" aria-expanded="false" aria-label="Toggle navigation">
        <span class="navbar-toggler-icon"></span>
      </button>

      <div class="collapse navbar-collapse" id="navbarSupportedContent">
        <ul class="navbar-nav mr-auto">
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Case studies
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="/casestudies/specificity/">Measuring specificity</a>
              <a class="dropdown-item" href="/casestudies/nestedness/">Nestedness significance</a>
              <a class="dropdown-item" href="/casestudies/betadiv/">Network comparison</a>
            </div>
          </li>
          <li class="nav-item dropdown">
            <a class="nav-link dropdown-toggle" href="#" id="navbarDropdown" role="button" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              Manual
            </a>
            <div class="dropdown-menu" aria-labelledby="navbarDropdown">
              <a class="dropdown-item" href="/manual/types/">Types</a>
              <a class="dropdown-item" href="/manual/generalities">Generalities</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="/manual/nestedness/">Measuring nestedness</a>
              <a class="dropdown-item" href="/manual/motifs/">Counting motifs</a>
              <a class="dropdown-item" href="/manual/betadiversity/">Network dissimilarity</a>
              <div class="dropdown-divider"></div>
              <a class="dropdown-item" href="/manual/data/">Datasets</a>
              <a class="dropdown-item" href="/manual/plots/">Network plots</a>
            </div>
          </li>
          <li class="nav-item">
            <a class="nav-link disabled" href="#">API reference</a>
          </li>
        </ul>
      </div>
    </div>
  </nav>

  <div class="container maincontent">
    <h1>Measuring species specificity</h1>
    <p>Ecological specificity is an important property of species within a network. One
way to approach it is to measure the degree of species. For example we can
measure the degree of ants in the ant-plant network of Fonseca &amp; Ganade (1996):</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">N</span> <span class="o">=</span> <span class="n">fonseca_ganade_1996</span><span class="x">()</span>
<span class="n">degree</span><span class="x">(</span><span class="n">N</span><span class="x">,</span> <span class="mi">1</span><span class="x">)</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>Dict{String,Int64} with 25 entries:
  "Pseudomyrmex concolor"         =&gt; 2
  "Azteca isthmica"               =&gt; 4
  "Azteca schummani"              =&gt; 2
  "Solenops A"                    =&gt; 2
  "Pseudomyrmex nigrescens"       =&gt; 2
  "Crematogaster B"               =&gt; 3
  "Crematogaster C"               =&gt; 2
  "Azteca D"                      =&gt; 1
  "Allomerus aff. Octoarticulata" =&gt; 3
  "Azteca G"                      =&gt; 3
  "Azteca TO"                     =&gt; 1
  "Crematogaster D"               =&gt; 2
  "Pheidole minutula"             =&gt; 3
  "Azteca polymorpha"             =&gt; 1
  "Camponotus balzanii"           =&gt; 1
  "Allomerus D"                   =&gt; 1
  "Crematogaster A"               =&gt; 4
  "Azteca Q"                      =&gt; 1
  "Azteca HC"                     =&gt; 1
  ⋮                               =&gt; ⋮
</code></pre></div></div>

<p>A useful way to see represent this information is to plot the sorted degrees:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">degree</span><span class="x">(</span><span class="n">N</span><span class="x">,</span><span class="mi">1</span><span class="x">)</span> <span class="o">|&gt;</span>
  <span class="n">values</span> <span class="o">|&gt;</span> <span class="n">collect</span> <span class="o">|&gt;</span>
  <span class="n">sort</span> <span class="o">|&gt;</span> <span class="n">reverse</span> <span class="o">|&gt;</span>
  <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">scatter</span><span class="x">(</span><span class="n">x</span><span class="x">,</span> <span class="n">ylab</span><span class="o">=</span><span class="s">"Species degree"</span><span class="x">,</span> <span class="n">xlab</span><span class="o">=</span><span class="s">"Species rank"</span><span class="x">,</span> <span class="n">lab</span><span class="o">=</span><span class="s">""</span><span class="x">)</span>
</code></pre></div></div>

<pre class="julia-error">
ERROR: UndefVarError: scatter not defined
</pre>

<p>This is an easy way to see that there are comparatively fewer species with many
interactions, and more species with a single interaction.</p>

<p>Species degree is not really scaled – it can vary between 0 and 1. For this
reason, we will look at measures of specificity instead. <code class="highlighter-rouge">EcologicalNetwork</code>
follows the guidelines of @PoiCan12, and</p>

<p>An analog to degree is the <em>resource range</em>, which returns 0 when a species
interacts will all possible partners, and 1 when it has a single partner.
Because this amounts to measuring specificity in the absence of information on
interaction strength, this is exactly what we will do:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">N</span> <span class="o">|&gt;</span>
  <span class="n">n</span> <span class="o">-&gt;</span> <span class="nb">convert</span><span class="x">(</span><span class="n">BinaryNetwork</span><span class="x">,</span> <span class="n">n</span><span class="x">)</span> <span class="o">|&gt;</span>
  <span class="n">specificity</span> <span class="o">|&gt;</span>
  <span class="n">sort</span> <span class="o">|&gt;</span> <span class="n">reverse</span> <span class="o">|&gt;</span>
  <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">scatter</span><span class="x">(</span><span class="n">x</span><span class="x">,</span> <span class="n">ylab</span><span class="o">=</span><span class="s">"Resource range"</span><span class="x">,</span> <span class="n">xlab</span><span class="o">=</span><span class="s">"Species rank"</span><span class="x">,</span> <span class="n">lab</span><span class="o">=</span><span class="s">""</span><span class="x">)</span>
</code></pre></div></div>

<pre class="julia-error">
ERROR: UndefVarError: scatter not defined
</pre>

<p>Interesting! Even though some species have up to 
4 interactions, because there are 
16
plants available, the specificity of all ants is high.</p>

<p>We can also look at the specificity accounting for interaction strength – this
defaults to using the <em>Paired-differences index</em>, which similarly returns 1 when
the species is a specialist.</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">N</span> <span class="o">|&gt;</span>
  <span class="n">specificity</span> <span class="o">|&gt;</span>
  <span class="n">sort</span> <span class="o">|&gt;</span> <span class="n">reverse</span> <span class="o">|&gt;</span>
  <span class="n">x</span> <span class="o">-&gt;</span> <span class="n">scatter</span><span class="x">(</span><span class="n">x</span><span class="x">,</span> <span class="n">ylab</span><span class="o">=</span><span class="s">"Paired-differences index"</span><span class="x">,</span> <span class="n">xlab</span><span class="o">=</span><span class="s">"Species rank"</span><span class="x">,</span> <span class="n">lab</span><span class="o">=</span><span class="s">""</span><span class="x">)</span>
</code></pre></div></div>

<pre class="julia-error">
ERROR: UndefVarError: scatter not defined
</pre>

<p>Because the value of the paired differences index is strongly contingent upon
the number of interactions, it is almost always interesting to comapre the two.
Specifically, because it is possible to show that the resource range is always
lower or equal to the paired diffences index, we can safely substract them to
look at the “residuals” of specificity due to the uneven strength of
interactions:</p>

<div class="language-julia highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">rr</span> <span class="o">=</span> <span class="n">specificity</span><span class="x">(</span><span class="nb">convert</span><span class="x">(</span><span class="n">BinaryNetwork</span><span class="x">,</span><span class="n">N</span><span class="x">))</span>
<span class="n">pdi</span> <span class="o">=</span> <span class="n">specificity</span><span class="x">(</span><span class="n">N</span><span class="x">)</span>
<span class="n">spe</span> <span class="o">=</span> <span class="n">Dict</span><span class="x">(</span><span class="n">zip</span><span class="x">(</span><span class="n">species</span><span class="x">(</span><span class="n">N</span><span class="x">,</span><span class="mi">1</span><span class="x">),</span><span class="n">pdi</span><span class="o">-</span><span class="n">rr</span><span class="x">))</span>
<span class="n">sort</span><span class="x">(</span><span class="n">collect</span><span class="x">(</span><span class="n">spe</span><span class="x">),</span> <span class="n">by</span><span class="o">=</span><span class="n">x</span><span class="o">-&gt;</span><span class="n">x</span><span class="x">[</span><span class="mi">2</span><span class="x">])</span>
</code></pre></div></div>

<div class="highlighter-rouge"><div class="highlight"><pre class="highlight"><code>25-element Array{Pair{String,Float64},1}:
 "Azteca isthmica"=&gt;0.0                   
 "Crematogaster B"=&gt;0.0                   
 "Crematogaster C"=&gt;0.0                   
 "Azteca D"=&gt;0.0                          
 "Azteca TO"=&gt;0.0                         
 "Azteca polymorpha"=&gt;0.0                 
 "Camponotus balzanii"=&gt;0.0               
 "Allomerus D"=&gt;0.0                       
 "Azteca Q"=&gt;0.0                          
 "Azteca HC"=&gt;0.0                         
 ⋮                                        
 "Crematogaster D"=&gt;0.0222222             
 "Azteca schummani"=&gt;0.0333333            
 "Azteca aff. Isthmica"=&gt;0.0333333        
 "Pseudomyrmex nigrescens"=&gt;0.0375        
 "Solenops A"=&gt;0.0444444                  
 "Azteca G"=&gt;0.0972222                    
 "Allomerus aff. Octoarticulata"=&gt;0.104762
 "Pheidole minutula"=&gt;0.112545            
 "Crematogaster A"=&gt;0.114286
</code></pre></div></div>

<p>Species with the highest values of this difference are increasingly specialized
compared to their number of interactions.</p>

  </div>


  <script src="https://cdnjs.cloudflare.com/ajax/libs/popper.js/1.12.9/umd/popper.min.js" integrity="sha384-ApNbgh9B+Y1QKtv3Rn7W3mgPxhU9K/ScQsAP7hUibX39j7fakFPskvXusvfa0b4Q" crossorigin="anonymous"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/js/bootstrap.min.js" integrity="sha384-JZR6Spejh4U02d8jOt6vLEHfe/JQGiRRSQQxSfFWpi1MquVdAyjUar5+76PVCmYl" crossorigin="anonymous"></script>
  <script type="text/javascript">
  $(function () {
    $('[data-toggle="popover"]').popover({html:true})
  })
  $('.popover-dismiss').popover({
    trigger: 'focus'
  })
  </script>
  <script type="text/javascript">

Array.prototype.uav = function()
{
  var n = {},r=[];
  for(var i = 0; i < this.length; i++)
  {
    if (!n[this[i]])
    {
      n[this[i]] = true;
      r.push(this[i]);
    }
  }
  return r;
}

var regexp = /(\[?)(@)(\w+\d{2}\w?)(\]?)/g;

var refs;
jQuery.ajaxSetup({async:false});
gref = function(d) {refs = d; return refs;}
$.getJSON("/references.json", gref);
jQuery.ajaxSetup({async:true});

match = regexp.exec($('.maincontent').text());
while (match != null) {
  var matchedref = match[3];
  var brackets = match[1] == "[";
  var ref = refs.filter(function(a){return a['id'] == matchedref})[0];

  var inline = "";
  inline += ref['author'][0]['family'];
  if (ref['author'].length == 2) {
    inline += " & ";
    inline += ref['author'][1]['family'];
  }
  if (ref['author'].length > 2) {
    inline += " et al.";
  }

  var GOTO = '';
  if (ref['DOI']) {
    var GOTO = "http://dx.doi.org/"+ref['DOI'];
  } else {
    if (ref['URL']) {
      var GOTO = ref['URL'];
    } else {
      var GOTO = "#";
    }
  }

  var pubyear = ref['issued']['date-parts'][0][0];
  reflink = "<a href='" + GOTO + "' title='" + ref['title'] + "' target='_blank' >Read it!</a>";
  btn = '<a tabindex="0" class="biblio-ref" role="button" data-toggle="popover" data-trigger="focus" title="' + inline + ' (' + pubyear + ')" data-content="' + ref['title'] + '<hr />' + reflink + '"><i class="far fa-file-alt"></i></a>';
  pubyear = btn;
  if (brackets) {
    inline = pubyear;
  } else {
    inline = inline + " " + pubyear;
  }


  var new_html = $('.maincontent').html().replace(match[0], inline);
  $('.maincontent').html(function() {return new_html});

  match = regexp.exec($('.maincontent').text());
}

</script>

</body>
</html>
